<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Agricola</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Custom Google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
        rel="stylesheet" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
</head>

<style>
    .step {
        display: none;
    }

    .step.active {
        display: block;
    }

    .nav-pills .nav-link.active {
        background-color: #198754;
    }

    .form-section {
        margin-bottom: 1rem;
        padding: 1rem;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        background-color: #f8f9fa;
    }

    .form-section h5 {
        color: #198754;
        margin-bottom: 1rem;
        font-size: 1rem;
    }

    .summary-card {
        position: sticky;
        top: 20px;
        height: fit-content;
    }

    .final-summary {
        margin-top: 2rem;
        display: none;
    }

    /* .real-time-update {
        animation: pulse 1.5s infinite;
    } */

    @keyframes pulse {
        0% {
            background-color: rgba(25, 135, 84, 0.05);
        }

        50% {
            background-color: rgba(25, 135, 84, 0.15);
        }

        100% {
            background-color: rgba(25, 135, 84, 0.05);
        }
    }

    body {
        /* Caminho para a imagem - ajuste conforme sua estrutura de arquivos */
        background-image: url('img/bg.jpg');

        /* Para cobrir toda a div */
        background-size: cover;

        /* Para centralizar a imagem */
        background-position: center;

        /* Para não repetir a imagem */
        background-repeat: no-repeat;

        /* Cor de fallback caso a imagem não carregue */
        background-color: #f0f0f0;

        /* Garantir que a div tenha dimensões */
        width: 100%;
        /* Ajuste conforme necessário */

        /* Outras propriedades opcionais */
        background-attachment: fixed;
        /* Para efeito parallax */
        position: relative;
        /* Para permitir sobreposição de outros elementos */
    }

    .nav-text {
        display: block;
        padding: var(--bs-nav-link-padding-y) var(--bs-nav-link-padding-x);
        font-size: var(--bs-nav-link-font-size);
        font-weight: var(--bs-nav-link-font-weight);
        color: var(--bs-nav-link-color);
        text-decoration: none;
        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
        color: gray;
        font-style: italic;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<body class="d-flex flex-column h-100 bg-light">
    <main class="flex-shrink-0">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light bg-white py-3">
            <div class="container px-5">
                <a class="navbar-brand" href="index.html"><span class="fw-bolder text-primary">Custo de
                        Plantio</span></a>
                <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 small fw-bolder">
                            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="resume.html">Resume</a></li>
                            <li class="nav-item"><a class="nav-link" href="projects.html">Projects</a></li>
                            <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                        </ul>
                    </div> -->
            </div>
        </nav>
        <!-- Page Content-->
        <div class="container p-5">
            <div class="row gx-5 justify-content-center">
                <div class="row">
                    <div class="col-md-7">
                        <!-- Skills Section-->
                        <section>
                            <!-- Skillset Card-->
                            <div class="card shadow border-0 rounded-4 mb-5">
                                <div class="card-body p-5">

                                    <!-- Progress Steps -->

                                    <ul class="nav nav-pills mb-3 justify-content-start">
                                        <li class="nav-item">
                                            <a class="nav-link active" data-step="1" href="#">1. Insumos</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-step="2" href="#">2. Operações</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-step="3" href="#">3. Custos Gerais</a>
                                        </li>
                                        <li class="nav-item">
                                            <spam class="nav-text">preencha os valores por R$/ha</spam>
                                        </li>
                                    </ul>



                                    <!-- Form Steps -->
                                    <form id="costWizard">
                                        <!-- Step 1: Insumos -->
                                        <div class="step active" id="step1">
                                            <div class="form-section">
                                                <h5>Insumos Agrícolas</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-6">
                                                        <label for="corretivos" class="form-label">Corretivos
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="corretivos" value="4.00">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="sementes-forrageiras" class="form-label">Sementes
                                                            Forrageiras </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="sementes-forrageiras" value="12.00">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="fertilizantes" class="form-label">Fertilizantes
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="fertilizantes" value="467.40">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="sementes" class="form-label">Sementes
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="sementes" value="250.00">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-section">
                                                <h5>Defensivos Agrícolas</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-4">
                                                        <label for="herbicidas" class="form-label">Herbicidas
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="herbicidas">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="inseticidas" class="form-label">Inseticidas
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="inseticidas">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="fungicidas" class="form-label">Fungicidas
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="fungicidas">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="d-flex justify-content-between mt-2">
                                                <button type="button" class="btn btn-primary" disabled>Anterior</button>
                                                <button type="button" class="btn btn-primary next-step"
                                                    data-next="2">Próximo</button>
                                            </div>
                                        </div>

                                        <!-- Step 2: Operações -->
                                        <div class="step" id="step2">
                                            <div class="form-section">
                                                <h5>Operações Mecânicas</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-4">
                                                        <label for="correcao-solo" class="form-label">Correção do
                                                            Solo
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="correcao-solo" value="1.14">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="formacao-forragem" class="form-label">Formação
                                                            de
                                                            Forragem </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="formacao-forragem" value="2.40">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="semeadura" class="form-label">Semeadura/Adubação
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="semeadura" value="124.35">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="adubacao-cobertura" class="form-label">Adubação
                                                            de
                                                            Cobertura </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="adubacao-cobertura" value="25.14">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="pulverizacao" class="form-label">Pulverização
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="pulverizacao" value="100.21">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="colheita" class="form-label">Colheita
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="colheita" value="127.45">
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- <div class="form-section">
                                                <h5>Operações Terceirizadas</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-6">
                                                        <label for="frete-agricola" class="form-label">Frete
                                                            Agrícola
                                                            </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="frete-agricola" value="74.49">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="outros-terceirizados" class="form-label">Outros
                                                            Serviços
                                                            </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="outros-terceirizados">
                                                    </div>
                                                </div>
                                            </div> -->

                                            <div class="form-section">
                                                <h5>Mão de Obra</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-4">
                                                        <label for="preparo-solo-mo" class="form-label">Preparo do
                                                            Solo
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="preparo-solo-mo" value="0.88">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="semeadura-mo" class="form-label">Semeadura
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="semeadura-mo" value="16.83">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="tratos-mo" class="form-label">Tratos Culturais
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="tratos-mo" value="20.82">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="colheita-mo" class="form-label">Colheita
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="colheita-mo" value="11.55">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="geral-mo" class="form-label">Mão de Obra Geral
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="geral-mo" value="106.80">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="d-flex justify-content-between mt-2">
                                                <button type="button" class="btn btn-primary prev-step"
                                                    data-prev="1">Anterior</button>
                                                <button type="button" class="btn btn-primary next-step"
                                                    data-next="3">Próximo</button>
                                            </div>
                                        </div>

                                        <!-- Step 3: Custos Gerais -->
                                        <div class="step" id="step3">
                                            <div class="form-section">
                                                <h5>Custos Administrativos</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-4">
                                                        <label for="pro-labore" class="form-label">Pró-labore
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="pro-labore">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="administrativos" class="form-label">Custos
                                                            Administrativos </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="administrativos" value="51.99">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="impostos" class="form-label">Impostos
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="impostos" value="16.14">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="seguro" class="form-label">Seguro
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="seguro" value="60.78">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="assistencia-tecnica" class="form-label">Assistência
                                                            Técnica </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="assistencia-tecnica" value="39.85">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="juros" class="form-label">Juros de Capital
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control" id="juros"
                                                            value="75.77">
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- <div class="form-section">
                                                <h5>Depreciação</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-3">
                                                        <label for="dep-maquinas" class="form-label">Máquinas
                                                            </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="dep-maquinas" value="103.37">
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label for="dep-implementos" class="form-label">Implementos
                                                            </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="dep-implementos" value="103.40">
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label for="dep-utilitarios" class="form-label">Utilitários
                                                            </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="dep-utilitarios" value="22.96">
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label for="dep-benfeitorias" class="form-label">Benfeitorias
                                                            </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="dep-benfeitorias" value="19.55">
                                                    </div>
                                                </div>
                                            </div> -->

                                            <div class="form-section">
                                                <h5>Custo de Oportunidade</h5>
                                                <div class="row g-2">
                                                    <div class="col-md-4">
                                                        <label for="op-maquinas" class="form-label">Máquinas
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="op-maquinas" value="138.76">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="op-implementos" class="form-label">Implementos
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="op-implementos" value="63.47">
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label for="op-terra" class="form-label">Terra
                                                        </label>
                                                        <input type="number" step="0.01" class="form-control"
                                                            id="op-terra" value="806.07">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="d-flex justify-content-between mt-2">
                                                <button type="button" class="btn btn-primary prev-step"
                                                    data-prev="2">Anterior</button>
                                                <button type="submit" class="btn btn-success">Finalizar
                                                    Cálculo</button>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                            </div>
                        </section>
                    </div>





                    <!-- Resumo em Tempo Real (col-6) -->
                    <div class="col-md-5">

                        <div class="form-section">
                            <h5>Resumo dos custos</h5>

                            <div class="table-responsive ">
                                <table class="table table-sm m-0">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Segmento</th>
                                            <th class="text-end">Valor (R$/ha)</th>
                                        </tr>
                                    </thead>
                                    <tbody id="summaryTable">
                                        <!-- Preenchido via JavaScript -->
                                    </tbody>
                                    <tfoot class="table-group-divider">
                                        <tr>
                                            <th>Custo Operacional</th>
                                            <th class="text-end" id="total-operacional">R$ 0,00</th>
                                        </tr>
                                        <tr>
                                            <th>Custo Operacional Total</th>
                                            <th class="text-end" id="total-operacional-total">R$ 0,00</th>
                                        </tr>
                                        <tr>
                                            <th>Custo Total</th>
                                            <th class="text-end" id="total-geral">R$ 0,00</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>

                        <div class="form-section">
                            <h5>Receita e Margem</h5>

                            <div class="mt-3">
                                <div class="row g-2">
                                    <div class="col-md-6">
                                        <label for="preco-medio" class="form-label">Preço Médio (R$/sc)</label>
                                        <input type="number" step="0.01" class="form-control" id="preco-medio"
                                            value="70.50">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="produtividade" class="form-label">Produtividade
                                            (sc/ha)</label>
                                        <input type="number" step="0.01" class="form-control" id="produtividade"
                                            value="49.17">
                                    </div>
                                </div>

                                <table class="table table-sm mt-2  m-0">
                                    <tr>
                                        <td>Receita Bruta</td>
                                        <td class="text-end" id="receita-bruta">R$ 0,00</td>
                                    </tr>
                                    <tr>
                                        <td>Margem Operacional</td>
                                        <td class="text-end" id="margem-operacional">R$ 0,00</td>
                                    </tr>
                                    <tr>
                                        <td>Margem Total</td>
                                        <td class="text-end" id="margem-total">R$ 0,00</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <!-- Div de Resumo Final (aparece após clicar em Finalizar) -->
                        <div id="finalSummary" class="final-summary mt-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center"
                                    data-bs-toggle="collapse" href="#collapseFinalSummary" style="cursor: pointer;">
                                    <h5 class="mb-0">Resumo Final do Cálculo</h5>
                                    <span class="badge bg-success rounded-pill">Ver Detalhes</span>
                                </div>
                                <div class="collapse" id="collapseFinalSummary">
                                    <div class="card-body" id="finalSummaryContent">
                                        <!-- Preenchido via JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </main>

    <!-- Footer-->
    <footer class="bg-white py-4 mt-auto">
        <div class="container px-5">
            <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                <div class="col-auto">
                    <div class="small m-0">Copyright &copy; 2025</div>
                </div>
                <!-- <div class="col-auto">
                    <a class="small" href="#!">Privacy</a>
                    <span class="mx-1">&middot;</span>
                    <a class="small" href="#!">Terms</a>
                    <span class="mx-1">&middot;</span>
                    <a class="small" href="#!">Contact</a>
                </div> -->
            </div>
        </div>
    </footer>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Navegação entre steps
            const navLinks = document.querySelectorAll('.nav-link');
            const steps = document.querySelectorAll('.step');

            // Eventos de navegação
            document.querySelectorAll('.next-step').forEach(button => {
                button.addEventListener('click', function () {
                    const nextStep = this.getAttribute('data-next');
                    goToStep(nextStep);
                });
            });

            document.querySelectorAll('.prev-step').forEach(button => {
                button.addEventListener('click', function () {
                    const prevStep = this.getAttribute('data-prev');
                    goToStep(prevStep);
                });
            });

            // Navegação pelos links
            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const step = this.getAttribute('data-step');
                    goToStep(step);
                });
            });

            // Atualização em tempo real ao modificar inputs
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('input', function () {
                    calculateTotals();
                    // Efeito visual de atualização
                    const summaryCard = document.querySelector('.summary-card');
                    summaryCard.classList.add('real-time-update');
                    setTimeout(() => {
                        summaryCard.classList.remove('real-time-update');
                    }, 1500);
                });
            });

            // Função para ir para um step específico
            function goToStep(stepNumber) {
                // Animação de transição
                document.querySelector('.step.active').style.opacity = '0';

                setTimeout(() => {
                    // Esconde todos os steps
                    steps.forEach(step => {
                        step.classList.remove('active');
                        step.style.opacity = '1';
                    });

                    // Mostra o step atual
                    const currentStep = document.getElementById(`step${stepNumber}`);
                    currentStep.classList.add('active');
                    currentStep.style.opacity = '0';

                    // Anima a aparição
                    setTimeout(() => {
                        currentStep.style.opacity = '1';
                    }, 50);

                    // Atualiza a navegação
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('data-step') === stepNumber) {
                            link.classList.add('active');
                        }
                    });

                    // Rola a página para o topo com offset para o cabeçalho
                    const headerHeight = document.querySelector('header')?.offsetHeight || 0;
                    window.scrollTo({
                        top: headerHeight,
                        behavior: 'smooth'
                    });

                    // Se for o step 4, calcula os totais
                    if (stepNumber === '4') {
                        calculateTotals();
                    }
                }, 300);
            }

            // Função para calcular totais
            function calculateTotals() {
                // Coleta todos os valores
                const insumos = sumInputs(['corretivos', 'sementes-forrageiras', 'fertilizantes', 'sementes', 'herbicidas', 'inseticidas', 'fungicidas']);
                const operacoes = sumInputs(['correcao-solo', 'formacao-forragem', 'semeadura', 'adubacao-cobertura', 'pulverizacao', 'colheita']);
                // const terceirizados = sumInputs(['frete-agricola', 'outros-terceirizados']);
                const terceirizados = 0
                const maoDeObra = sumInputs(['preparo-solo-mo', 'semeadura-mo', 'tratos-mo', 'colheita-mo', 'geral-mo']);
                const custosGerais = sumInputs(['pro-labore', 'administrativos', 'impostos', 'seguro', 'assistencia-tecnica', 'juros']);
                // const depreciacao = sumInputs(['dep-maquinas', 'dep-implementos', 'dep-utilitarios', 'dep-benfeitorias']);
                const depreciacao = 0
                const custoOportunidade = sumInputs(['op-maquinas', 'op-implementos', 'op-terra']);

                // Calcula totais
                const custoOperacional = insumos + operacoes + terceirizados + maoDeObra;
                const custoOperacionalTotal = custoOperacional + custosGerais;
                const custoTotal = custoOperacionalTotal + depreciacao + custoOportunidade;

                // Preenche a tabela de resumo
                const summaryTable = document.getElementById('summaryTable');
                summaryTable.innerHTML = `
                <tr>
                    <td>Insumos</td>
                    <td class="text-end">${formatCurrency(insumos)}</td>
                </tr>
                <tr>
                    <td>Operações Mecânicas</td>
                    <td class="text-end">${formatCurrency(operacoes)}</td>
                </tr>
                <tr>
                   
                    <td>Mão de Obra</td>
                    <td class="text-end">${formatCurrency(maoDeObra)}</td>
                </tr>
                <tr>
                    <td>Custos Gerais</td>
                    <td class="text-end">${formatCurrency(custosGerais)}</td>
                </tr>
                <tr>
                    
                    <td>Custo de Oportunidade</td>
                    <td class="text-end">${formatCurrency(custoOportunidade)}</td>
                </tr>
            `;

                // Atualiza os totais
                document.getElementById('total-operacional').textContent = formatCurrency(custoOperacional);
                document.getElementById('total-operacional-total').textContent = formatCurrency(custoOperacionalTotal);
                document.getElementById('total-geral').textContent = formatCurrency(custoTotal);

                // Calcula receita e margens
                const precoMedio = parseFloat(document.getElementById('preco-medio').value) || 0;
                const produtividade = parseFloat(document.getElementById('produtividade').value) || 0;
                const receitaBruta = precoMedio * produtividade;

                document.getElementById('receita-bruta').textContent = formatCurrency(receitaBruta);
                document.getElementById('margem-operacional').textContent = formatCurrency(receitaBruta - custoOperacional);
                document.getElementById('margem-total').textContent = formatCurrency(receitaBruta - custoTotal);
            }

            // Função auxiliar para somar valores de inputs
            function sumInputs(ids) {
                return ids.reduce((sum, id) => {
                    const value = parseFloat(document.getElementById(id).value) || 0;
                    return sum + value;
                }, 0);
            }

            // Formata valores monetários
            function formatCurrency(value) {
                return 'R$ ' + value.toFixed(2).replace('.', ',').replace(/(\d)(?=(\d{3})+\,)/g, '$1.');
            }

            // Evento de submit do formulário
            document.getElementById('costWizard').addEventListener('submit', function (e) {
                e.preventDefault();

                // Mostra o resumo final
                const finalSummary = document.getElementById('finalSummary');
                finalSummary.style.display = 'block';

                // Preenche o conteúdo do resumo final
                const finalSummaryContent = document.getElementById('finalSummaryContent');
                finalSummaryContent.innerHTML = `
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead class="table-light">
                            <tr>
                                <th>Item</th>
                                <th class="text-end">Valor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Receita Bruta</strong></td>
                                <td class="text-end"><strong>${document.getElementById('receita-bruta').textContent}</strong></td>
                            </tr>
                            <tr>
                                <td>Custo Operacional</td>
                                <td class="text-end">${document.getElementById('total-operacional').textContent}</td>
                            </tr>
                            <tr>
                                <td>Custo Total</td>
                                <td class="text-end">${document.getElementById('total-geral').textContent}</td>
                            </tr>
                            <tr class="table-success">
                                <td><strong>Margem Líquida</strong></td>
                                <td class="text-end"><strong>${document.getElementById('margem-total').textContent}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="alert ${parseFloat(document.getElementById('margem-total').textContent.replace(/[^\d,-]/g, '').replace(',', '.')) >= 0 ? 'alert-success' : 'alert-danger'} mt-3">
                    <strong>Resultado:</strong> ${parseFloat(document.getElementById('margem-total').textContent.replace(/[^\d,-]/g, '').replace(',', '.')) >= 0 ? 'Lucro' : 'Prejuízo'} na operação
                </div>
            `;

                // Rolagem suave até o resumo final
                finalSummary.scrollIntoView({ behavior: 'smooth' });
            });

            // Calcula totais inicialmente
            calculateTotals();
        });
    </script>

</body>

</html>